// Prisma schema
// Datasource configured for Supabase pooled (runtime) via DATABASE_URL
// and direct connection for migrations/introspection via DATABASE_DIRECT_URL

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Add your models below (instruction: do not modify existing models; currently none)

model AllMasjid {
  id         Int      @id @default(autoincrement())
  masjidName String
  colony     String?
  locality   String?
  fazar      String?  // Prayer time as string (e.g. HH:MM)
  zuhar      String?
  asar       String?
  maghrib    String?
  isha       String?
  taravih    String?  // Ramadan-specific prayer time
  juma       String?
  name       String?  // optional
  role       String?  // optional
  mobile     String?  // optional
  pasteMapUrl String? // Google Map URL for the masjid
  city        String?
  masjidCommittee MasjidCommittee?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("all_masjid")
}

model TasbihUser {
  id          Int      @id @default(autoincrement())
  fullName    String
  address     String?
  mobileNumber String
  weeklyCounts BigInt     @default(0)
  count        BigInt     @default(0)
  createdAt   DateTime @default(now())

  @@map("tasbih_users")
}

model NoticeImage {
  id        Int      @id @default(autoincrement())
  imageName String
  imageSrc  String
  createdAt DateTime @default(now())

  @@map("notice_images")
}

model FileTable {
  id      Int    @id
  fileUrl String
}

model Reward {
  id         Int      @id @default(autoincrement())
  fullName   String
  address    String?
  areaMasjid String?
  from       String   @default("")
  to         String   @default("")
  counts     Int      @default(0)
  weeklyCounts BigInt @default(0)
  position   Int
  createdAt  DateTime @default(now())

  @@map("rewards")
}

model Zikr {
  id         Int      @id @default(autoincrement())
  gender     String   @default("Male")
  fullName   String   @default("")
  address    String?
  areaMasjid String?
  mobile     String?
  zikrTypes  String[] @default([])
  zikrCounts Int
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("zikr")
}

model User {
  id         Int      @id @default(autoincrement())
  email      String   @unique
  password   String
  gender     String
  fullName   String
  address    String?
  areaMasjid String?
  mobile     String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("users")
}

model FreeService {
  id             Int      @id @default(autoincrement())
  mutuwalliName  String
  mobileNumber   String
  masjidName     String
  numberOfACs    String
  isServiceDone  Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("free_services")
}

model LocalStore {
  id          Int      @id @default(autoincrement())
  fullName    String
  mobile      String?
  shopName    String
  shopAddress String?
  workType    String?
  description String?
  imageName   String?
  imageSrc    String?
  imageSrcPortrait String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("local_stores")
}

model JobList {
  id              Int      @id @default(autoincrement())
  title           String
  company         String
  location        String
  mobile          String?
  type            String   // Full-time, Part-time, Contract, etc.
  salary          String
  postedDate      String?
  description     String   @db.Text
  requirements    String[] @default([])
  responsibilities String[] @default([])
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("job_lists")
}

model JobSeeker {
  id             Int      @id @default(autoincrement())
  fullName       String
  email          String   @unique
  password       String   @default("password123")
  mobile         String?
  jobCategory    String
  otherCategory  String?
  expectedSalary String
  experience     String
  skills         String   @db.Text
  address        String   @db.Text
  city           String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("job_seekers")
}

model MasjidCommittee {
  id               Int       @id @default(autoincrement())
  masjidName       String
  fullAddress      String
  city             String
  mutwalliName     String
  committeeMembers String[]  @default([])
  mobileNumbers    String[]  @default([])
  imaamName        String?   
  masjidId         Int      @unique
  password         String
  masjid           AllMasjid @relation(fields: [masjidId], references: [id])
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("masjid_committee")
}
